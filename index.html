<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>لعبة خلية حروف</title>
<style>
    * { box-sizing: border-box; }
    body {
        margin: 0;
        font-family: Arial, sans-serif;
        background: #111;
        color: #fff;
    }
    .app {
        max-width: 1000px;
        margin: 0 auto;
        padding: 20px;
        text-align: center;
    }

    header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
    }
    .logo {
        font-size: 18px;
        font-weight: bold;
        color: #ffcc00;
    }
    .back-home {
        font-size: 14px;
        cursor: pointer;
        color: #fff;
        background: #444;
        padding: 6px 12px;
        border-radius: 6px;
        border: none;
    }
    .back-home:hover { background: #666; }

    .screen { display: none; }
    .screen.active { display: block; }

    .welcome-title {
        font-size: 28px;
        margin-bottom: 10px;
    }
    .welcome-sub {
        margin-bottom: 30px;
        font-size: 16px;
        color: #ccc;
    }
    .teams-inputs {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-bottom: 20px;
        flex-wrap: wrap;
    }
    .teams-inputs div {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        gap: 5px;
    }
    .teams-inputs label { font-size: 14px; }
    .teams-inputs input {
        padding: 6px 10px;
        border-radius: 6px;
        border: 1px solid #555;
        min-width: 180px;
        background: #222;
        color: #fff;
    }
    .btn {
        padding: 10px 20px;
        border-radius: 8px;
        border: none;
        cursor: pointer;
        font-size: 16px;
        margin: 5px;
    }
    .btn-primary { background: #28a745; color: #fff; }
    .btn-primary:hover { background: #218838; }
    .btn-secondary { background: #ff9800; color: #111; }
    .btn-secondary:hover { background: #fb8c00; }
    .btn-small {
        font-size: 13px;
        padding: 6px 12px;
    }

    .status-bar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
        flex-wrap: wrap;
        gap: 10px;
    }
    .teams-status {
        display: flex;
        gap: 15px;
        align-items: center;
        flex-wrap: wrap;
    }
    .team-badge {
        padding: 6px 10px;
        border-radius: 20px;
        display: inline-flex;
        align-items: center;
        gap: 6px;
        font-size: 14px;
    }
    .team-color-green { background: #2e7d32; }
    .team-color-orange { background: #ef6c00; }
    .score { font-weight: bold; }
    .active-indicator {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background: #555;
    }
    .active-indicator.on-green {
        background: #00ff00;
        box-shadow: 0 0 8px #00ff00;
    }
    .active-indicator.on-orange {
        background: #ffa726;
        box-shadow: 0 0 8px #ffa726;
    }

    .timer-box {
        padding: 8px 14px;
        border-radius: 8px;
        background: #222;
        font-size: 16px;
    }
    .timer-value {
        font-size: 22px;
        font-weight: bold;
    }

    .controls-bar {
        margin-bottom: 15px;
    }

    .board-wrapper {
        display: flex;
        justify-content: center;
        margin-top: 10px;
    }
    .board {
        display: grid;
        grid-template-columns: repeat(5, 60px);
        grid-template-rows: repeat(5, 60px);
        gap: 4px;
    }
    .cell {
        width: 60px;
        height: 60px;
        border-radius: 14px;
        border: 2px solid #444;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 24px;
        cursor: pointer;
        background: #1e1e1e;
        color: #fff;
        transition: transform 0.1s, box-shadow 0.1s, background 0.1s;
    }
    .cell:hover {
        box-shadow: 0 0 10px #555;
        transform: scale(1.03);
    }
    .cell-middle {
        background: #3949ab;
    }

    .cell-top,
    .cell-bottom {
        background: #1b5e20;
    }
    .cell-left,
    .cell-right {
        background: #ff6f00;
    }

    .cell-selected-green {
        background: #00c853 !important;
        box-shadow: 0 0 12px #00e676;
    }
    .cell-selected-orange {
        background: #ffb300 !important;
        box-shadow: 0 0 12px #ffca28;
    }

    .message {
        margin-top: 15px;
        min-height: 20px;
        color: #ffd54f;
        font-size: 15px;
    }

    @media (max-width: 600px) {
        .board {
            grid-template-columns: repeat(5, 48px);
            grid-template-rows: repeat(5, 48px);
        }
        .cell {
            width: 48px;
            height: 48px;
            font-size: 18px;
        }
    }
</style>
</head>
<body>
<div class="app">
    <header>
        <div class="logo">The three shop</div>
        <button class="back-home" id="backHomeBtn">العودة للصفحة الرئيسية</button>
    </header>

    <section id="welcomeScreen" class="screen active">
        <div class="welcome-title">مرحباً في لعبة خلية حروف</div>
        <div class="welcome-sub">
            أدخل أسماء الفريقين، ثم اضغط زر "ابدأ اللعب" للانتقال إلى ساحة اللعب.
        </div>
        <div class="teams-inputs">
            <div>
                <label for="teamGreenName">اسم الفريق الأخضر:</label>
                <input type="text" id="teamGreenName" placeholder="مثال: فريق النخبة">
            </div>
            <div>
                <label for="teamOrangeName">اسم الفريق البرتقالي:</label>
                <input type="text" id="teamOrangeName" placeholder="مثال: فريق الأبطال">
            </div>
        </div>
        <button class="btn btn-primary" id="startGameBtn">ابدأ اللعب</button>
    </section>

    <section id="gameScreen" class="screen">
        <div class="status-bar">
            <div class="teams-status">
                <div class="team-badge team-color-green">
                    <span id="greenTeamLabel">الأخضر</span>
                    <span class="score" id="greenScore">0</span>
                    <span class="active-indicator" id="greenActiveLight"></span>
                </div>
                <div class="team-badge team-color-orange">
                    <span id="orangeTeamLabel">البرتقالي</span>
                    <span class="score" id="orangeScore">0</span>
                    <span class="active-indicator" id="orangeActiveLight"></span>
                </div>
            </div>
            <div class="timer-box">
                العداد:
                <span class="timer-value" id="timerValue">5</span>
                ثوانٍ
            </div>
        </div>

        <div class="controls-bar">
            <button class="btn btn-secondary btn-small" id="refereeBtn">
                الحكم: ابدأ العداد (5 ثواني)
            </button>
            <button class="btn btn-small" id="resetRoundBtn">
                جولة جديدة
            </button>
            <button class="btn btn-small" id="addPointBtn">
                إضافة نقطة للفريق الحالي
            </button>
        </div>

        <div class="board-wrapper">
            <div class="board" id="board">
                <!-- توزيع الحروف (5x5) مع إمكانية تكوين كلمات -->
                <!-- الصف 0 (أعلى – أخضر) -->
                <div class="cell cell-top" data-pos="0,0">ب</div>
                <div class="cell cell-top" data-pos="0,1">ي</div>
                <div class="cell cell-top" data-pos="0,2">ت</div>
                <div class="cell cell-top" data-pos="0,3">ك</div>
                <div class="cell cell-top" data-pos="0,4">ت</div>

                <!-- الصف 1 -->
                <div class="cell cell-left" data-pos="1,0">ا</div>
                <div class="cell" data-pos="1,1">ب</div>
                <div class="cell" data-pos="1,2">ا</div>
                <div class="cell" data-pos="1,3">ب</div>
                <div class="cell cell-right" data-pos="1,4">ا</div>

                <!-- الصف 2 (وسط) -->
                <div class="cell cell-left" data-pos="2,0">ق</div>
                <div class="cell" data-pos="2,1">ل</div>
                <div class="cell cell-middle" data-pos="2,2">●</div>
                <div class="cell" data-pos="2,3">م</div>
                <div class="cell cell-right" data-pos="2,4">ر</div>

                <!-- الصف 3 -->
                <div class="cell cell-left" data-pos="3,0">ن</div>
                <div class="cell" data-pos="3,1">و</div>
                <div class="cell" data-pos="3,2">ر</div>
                <div class="cell" data-pos="3,3">س</div>
                <div class="cell cell-right" data-pos="3,4">م</div>

                <!-- الصف 4 (أسفل – أخضر) -->
                <div class="cell cell-bottom" data-pos="4,0">د</div>
                <div class="cell cell-bottom" data-pos="4,1">ر</div>
                <div class="cell cell-bottom" data-pos="4,2">س</div>
                <div class="cell cell-bottom" data-pos="4,3">ة</div>
                <div class="cell cell-bottom" data-pos="4,4">ل</div>
            </div>
        </div>

        <div class="message" id="messageBox">
            مثال كلمات يمكن تكوينها: "بيت" (ب-ي-ت في الصف العلوي)، "باب" (ب-ا-ب عمودي أو مائل)، "كتاب"، "قلم"، "نور"، "درس".
        </div>
    </section>
</div>

<script>
(function () {
    const welcomeScreen = document.getElementById('welcomeScreen');
    const gameScreen = document.getElementById('gameScreen');
    const startGameBtn = document.getElementById('startGameBtn');
    const backHomeBtn = document.getElementById('backHomeBtn');

    const greenNameInput = document.getElementById('teamGreenName');
    const orangeNameInput = document.getElementById('teamOrangeName');

    const greenTeamLabel = document.getElementById('greenTeamLabel');
    const orangeTeamLabel = document.getElementById('orangeTeamLabel');
    const greenScoreEl = document.getElementById('greenScore');
    const orangeScoreEl = document.getElementById('orangeScore');
    const greenActiveLight = document.getElementById('greenActiveLight');
    const orangeActiveLight = document.getElementById('orangeActiveLight');

    const refereeBtn = document.getElementById('refereeBtn');
    const resetRoundBtn = document.getElementById('resetRoundBtn');
    const addPointBtn = document.getElementById('addPointBtn');

    const timerValue = document.getElementById('timerValue');
    const messageBox = document.getElementById('messageBox');
    const boardEl = document.getElementById('board');

    let currentTeam = 'green';
    let greenScore = 0;
    let orangeScore = 0;
    let timer = null;
    let timeLeft = 5;

    function updateActiveTeamUI() {
        if (currentTeam === 'green') {
            greenActiveLight.classList.add('on-green');
            orangeActiveLight.classList.remove('on-orange');
            showMessage('دور الفريق الأخضر، كوّن كلمة صحيحة بربط الحروف المتجاورة خلال ٥ ثواني.');
        } else {
            orangeActiveLight.classList.add('on-orange');
            greenActiveLight.classList.remove('on-green');
            showMessage('دور الفريق البرتقالي، كوّن كلمة صحيحة بربط الحروف المتجاورة خلال ٥ ثواني.');
        }
    }

    function switchTeam() {
        currentTeam = currentTeam === 'green' ? 'orange' : 'green';
        clearSelection();
        updateActiveTeamUI();
    }

    function showMessage(msg) {
        messageBox.textContent = msg;
    }

    function startTimer() {
        clearInterval(timer);
        timeLeft = 5;
        timerValue.textContent = timeLeft;
        timer = setInterval(() => {
            timeLeft--;
            timerValue.textContent = timeLeft;
            if (timeLeft <= 0) {
                clearInterval(timer);
                showMessage('انتهت 5 ثواني، يتحول الدور للفريق الآخر.');
                switchTeam();
            }
        }, 1000);
    }

    function clearSelection() {
        const cells = boardEl.querySelectorAll('.cell');
        cells.forEach(c => {
            c.classList.remove('cell-selected-green');
            c.classList.remove('cell-selected-orange');
        });
    }

    function addPointToCurrentTeam() {
        if (currentTeam === 'green') {
            greenScore++;
            greenScoreEl.textContent = greenScore;
        } else {
            orangeScore++;
            orangeScoreEl.textContent = orangeScore;
        }
    }

    startGameBtn.addEventListener('click', () => {
        const greenName = greenNameInput.value.trim() || 'الفريق الأخضر';
        const orangeName = orangeNameInput.value.trim() || 'الفريق البرتقالي';

        greenTeamLabel.textContent = greenName;
        orangeTeamLabel.textContent = orangeName;

        welcomeScreen.classList.remove('active');
        gameScreen.classList.add('active');

        currentTeam = 'green';
        greenScore = 0;
        orangeScore = 0;
        greenScoreEl.textContent = greenScore;
        orangeScoreEl.textContent = orangeScore;
        timerValue.textContent = '5';
        clearSelection();
        updateActiveTeamUI();
    });

    backHomeBtn.addEventListener('click', () => {
        clearInterval(timer);
        timerValue.textContent = '5';
        messageBox.textContent =
            'مثال كلمات يمكن تكوينها: "بيت" (ب-ي-ت في الصف العلوي)، "باب"، "كتاب"، "قلم"، "نور"، "درس".';
        clearSelection();
        gameScreen.classList.remove('active');
        welcomeScreen.classList.add('active');
    });

    refereeBtn.addEventListener('click', () => {
        startTimer();
    });

    resetRoundBtn.addEventListener('click', () => {
        clearInterval(timer);
        timerValue.textContent = '5';
        clearSelection();
        showMessage('تم بدء جولة جديدة، اقرأ السؤال ثم اضغط زر الحكم لبدء العداد.');
    });

    addPointBtn.addEventListener('click', () => {
        addPointToCurrentTeam();
        showMessage('تم إضافة نقطة للفريق الحالي. يتم تبديل الدور الآن.');
        switchTeam();
        clearInterval(timer);
        timerValue.textContent = '5';
    });

    boardEl.addEventListener('click', (e) => {
        const cell = e.target.closest('.cell');
        if (!cell) return;
        if (currentTeam === 'green') {
            cell.classList.toggle('cell-selected-green');
            cell.classList.remove('cell-selected-orange');
        } else {
            cell.classList.toggle('cell-selected-orange');
            cell.classList.remove('cell-selected-green');
        }
    });

})();
</script>
</body>
</html>
